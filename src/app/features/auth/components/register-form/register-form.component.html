<form [formGroup]=" registerForm">
  <div class="my-8">  

      <!-- input failed "user name" -->

      @let name = registerForm.get('name');
      
   <div class="mt-3">
        <div class="relative">
          <input formControlName="name"
          type="text" id="name" 
          class="peer main-input" placeholder=" " 
          [class.border-red-600]=" name?.touched && name?.getError('required')"
          [class.border-red-600]=" name?.touched && name?.getError('minlength')"
          [class.border-red-600]=" name?.touched && name?.getError('maxlength')"
          />
          <label for="name" 
          class=" main-label peer-focus:text-fg-brand peer-placeholder-shown:scale-100 
          peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">
          UserName :</label>
      </div>
   </div>

@if ( name?.touched &&name?.errors) {
     <div>
    <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle" role="alert">
  <svg class="w-4 h-4 me-2 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11h2v5m-2 0h4m-2.592-8.5h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
  <span class="sr-only">Danger</span>
  <div>
    <span class="font-medium">Ensure that these requirements are met:</span>
      <ul class="mt-2 list-disc list-outside space-y-1 ps-2.5">
@if (name?.getError('required')) {
          <li>Required</li>
}
@if (name?.getError('minlength')) {
          <li>At least 5 characters</li>
}
@if (name?.getError('maxlength')) {
          <li> max 20 characters</li>
}

    </ul>
  </div>
</div>
   </div>
}

   <!-- input failed "user email" -->
@let email = registerForm.get('email');

   <div class="mt-3">
        <div class="relative">
          <input formControlName="email"
          type="email" id="UserEmail" 
          class="peer main-input" placeholder=" "
             [class.border-red-600]=" email?.touched && email?.getError('required')"
          [class.border-red-600]=" email?.touched && email?.getError('email')"
          [class.border-red-600]=" email?.touched && email?.getError('email')"
          />
          <label for="UserEmail" 
          class=" main-label peer-focus:text-fg-brand peer-placeholder-shown:scale-100 
          peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">
          User Email :</label>
      </div>
      @if ( email?.touched &&email?.errors) {
     <div>
    <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle" role="alert">
  <svg class="w-4 h-4 me-2 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11h2v5m-2 0h4m-2.592-8.5h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
  <span class="sr-only">Danger</span>
  <div>
    <span class="font-medium">Ensure that these requirements are met:</span>
      <ul class="mt-2 list-disc list-outside space-y-1 ps-2.5">
@if (email?.getError('required')) {
          <li>Required</li>
}
@if (email?.getError('email')) {
          <li>email not valid</li>
}


    </ul>
  </div>
</div>
   </div>
}
   </div>

      <!-- input failed "user password" -->
@let pass = registerForm.get('password');

   <div class="mt-3">
        <div class="relative">
          <input formControlName="password"
          type="password" id="password" 
          class="peer main-input" placeholder=" " 
           [class.border-red-600]=" pass?.touched && pass?.getError('required')"
          [class.border-red-600]=" pass?.touched && pass?.getError('pattern')"
          />
          <label for="password" 
          class=" main-label peer-focus:text-fg-brand peer-placeholder-shown:scale-100 
          peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">
          User password :</label>
      </div>
            @if ( pass?.touched &&pass?.errors) {
     <div>
    <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle" role="alert">
  <svg class="w-4 h-4 me-2 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11h2v5m-2 0h4m-2.592-8.5h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
  <span class="sr-only">Danger</span>
  <div>
    <span class="font-medium">Ensure that these requirements are met:</span>
      <ul class="mt-2 list-disc list-outside space-y-1 ps-2.5">
@if (pass?.getError('required')) {
          <li>Required</li>
}
@if (pass?.getError('pattern')) {
          <li>password not valid</li>
          <li>Password must start with (Aa) and contain at least 8 numbers (ex:Ab12345678)</li>
}

    </ul>
  </div>
</div>
   </div>
}
   </div>


         <!-- input failed "user rePassword" -->
          @let rePassword = registerForm.get('rePassword');
   <div class="mt-3">
        <div class="relative">
          <input formControlName="rePassword"
          type="password" id="rePassword" 
          class="peer main-input" placeholder=" " 
            [class.border-red-600]=" rePassword?.touched && rePassword?.getError('required')"
          [class.border-red-600]=" rePassword?.touched && rePassword?.getError('pattern')"
          />
          <label for="rePassword" 
          class=" main-label peer-focus:text-fg-brand peer-placeholder-shown:scale-100 
          peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">
          User rePassword :</label>
      </div>
                  @if ( rePassword?.touched && registerForm.getError('passwordMatch')) {
     <div>
    <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle" role="alert">
  <svg class="w-4 h-4 me-2 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11h2v5m-2 0h4m-2.592-8.5h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
  <span class="sr-only">Danger</span>
  <div>
    <span class="font-medium">Ensure that these requirements are met:</span>
      <ul class="mt-2 list-disc list-outside space-y-1 ps-2.5">
@if (rePassword?.getError('required')) {
          <li>Required</li>
} @if (registerForm.getError('passwordMatch')) {
          <li>RePassword not valid</li>
}

    </ul>
  </div>
</div>
   </div>
}
   </div>
         <!-- input failed "user phone" -->
          @let phone = registerForm.get('phone') ;
   <div class="mt-3">
        <div class="relative">
          <input formControlName="phone"
          type="tel" id="phone" 
          class="peer main-input" placeholder=" "
           [class.border-red-600]=" phone?.touched && phone?.getError('required')"
          [class.border-red-600]=" phone?.touched && phone?.getError('pattern')"
          />
          <label for="phone" 
          class=" main-label peer-focus:text-fg-brand peer-placeholder-shown:scale-100 
          peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">
          User phone:</label>
      </div>
                        @if ( phone?.touched &&phone?.errors) {
     <div>
    <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle" role="alert">
  <svg class="w-4 h-4 me-2 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11h2v5m-2 0h4m-2.592-8.5h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
  <span class="sr-only">Danger</span>
  <div>
    <span class="font-medium">Ensure that these requirements are met:</span>
      <ul class="mt-2 list-disc list-outside space-y-1 ps-2.5">
@if (phone?.getError('required')) {
          <li>Required</li>
}
@if (phone?.getError('pattern')) {
          <li>Phone not valid</li>
}


    </ul>
  </div>
</div>
   </div>
}
   </div>


    <div>
        <button (click)="submitData()" class="btn-main w-full mt-3 ">Register
         @if (isLoading) {
           <i class="fas fa-spinner fa-spin"></i>
         }
        </button>
    </div>

    @if (SuccessMessage) {
      <div class="mt-2">
        <div class="bg-green-200 border-l-4 border-green-500 text-green-800 font-bold p-4" role="alert">
          <p class="font-bold"></p>
          <p>{{SuccessMessage}}</p>
          <p>You will be redirected in {{redirectCounter}} seconds...</p>
        </div>
      </div>
    }
@if (errorMessage) {
  <div class="mt-2">
  <div class="bg-red-300 border-l-4 border-red-500 text-black p-4" role="alert">
    <p class="font-bold">
      {{errorMessage}}
    </p>
    <p></p>
  </div>
</div>
}

</div>
</form>
