
<section class="px-3 py-6 sm:px-6 sm:py-10 ">
  <div class="max-w-6xl mx-auto">

    <h1 class="text-2xl sm:text-3xl font-bold text-main-600 mb-6">My Orders</h1>

    @if (!ordersService.userOrders || ordersService.userOrders.length === 0) {
      <div class="bg-white border rounded-2xl p-6 text-gray-600">
        No orders found.
      </div>
    } @else {

      <div class="space-y-6 ">
        @for (order of ordersService.userOrders; track order._id) {

          <article class="bg-main-50 border rounded-2xl p-4 sm:p-6">
            <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
              <div>
                <p class="text-sm text-gray-500">Order ID</p>
                <p class="font-semibold text-gray-900 break-all">{{ order._id }}</p>
              </div>

              <div class="flex flex-wrap items-center gap-2">
                <span
                  class="px-3 py-1 rounded-full text-sm border"
                  [class.bg-green-50]="order.isPaid"
                  [class.text-green-700]="order.isPaid"
                  [class.border-green-200]="order.isPaid"
                  [class.bg-yellow-50]="!order.isPaid"
                  [class.text-yellow-700]="!order.isPaid"
                  [class.border-yellow-200]="!order.isPaid"
                >
                  {{ order.isPaid ? 'Paid' : 'Unpaid' }}
                </span>

                <span
                  class="px-3 py-1 rounded-full text-sm border"
                  [class.bg-blue-50]="order.isDelivered"
                  [class.text-blue-700]="order.isDelivered"
                  [class.border-blue-200]="order.isDelivered"
                  [class.bg-gray-50]="!order.isDelivered"
                  [class.text-gray-700]="!order.isDelivered"
                  [class.border-gray-200]="!order.isDelivered"
                >
                  {{ order.isDelivered ? 'Delivered' : 'Not delivered' }}
                </span>

                <span class="px-3 py-1 rounded-full text-sm border bg-gray-50 text-gray-700 border-gray-200">
                  {{ order.paymentMethodType }}
                </span>
              </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-5">
              <div class="bg-gray-50 rounded-xl p-3">
                <p class="text-xs text-gray-500">Total</p>
                <p class="text-lg font-bold text-gray-900">
                  {{ order.totalOrderPrice }} <span class="text-gray-500">$</span>
                </p>
              </div>

         

              <div class="bg-gray-50 rounded-xl p-3">
                <p class="text-xs text-gray-500">Shipping</p>
                <p class="text-sm font-medium text-gray-900 break-words">
                  {{ order.shippingAddress.city }} - {{ order.shippingAddress.details }}
                </p>
                <p class="text-sm text-gray-600">
                  {{ order.shippingAddress.phone }}
                </p>
              </div>
            </div>

            <h3 class="mt-6 font-semibold text-gray-900">Items</h3>

            <div class="mt-3 space-y-3">
              @for (item of order.cartItems; track item._id) {
                <div class="flex gap-3 sm:gap-4 border rounded-xl p-3">
                  <img
                    class="w-16 h-16 sm:w-20 sm:h-20 rounded-lg object-cover flex-none"
                    [src]="item.product.imageCover"
                    [alt]="item.product.title"
                  />

                  <div class="min-w-0 flex-1">
                    <p class="font-semibold text-gray-900 break-words">
                      {{ item.product.title }}
                    </p>

                    <p class="text-sm text-gray-600 mt-1">
                      Brand: <span class="font-medium">{{ item.product.brand.name }}</span>
                      <span class="mx-2">â€¢</span>
                      Qty: <span class="font-medium">{{ item.count }}</span>
                    </p>

                    <p class="text-sm text-gray-600 mt-1">
                      Price: <span class="font-semibold text-gray-900">{{ item.price }}</span> $
                    </p>
                  </div>
                </div>
              }
            </div>
          </article>

        }
      </div>
    }

  </div>
</section>
